//module.exports = require('./sqlite3');
//je vais chercheer le driver sqlite3 dans node_modules
const sqlite3 = require('sqlite3').verbose();
const fs = require('fs');

const db = new sqlite3.Database(dbFile);


//sans de.serialize.
// les opérations sont lancées en même temps.
// le INSERT risque d'être executé.
// avant que la création de la table soit finie.
db.serialize(() => {
    if (!fs.existsSync(dbFile)) {
        db.run('CREATE TABLE products (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT)');
    }

    db.run('INSERT INTO products (name) VALUES (?)', 'sac');
    db.all('SELECT name FROM products', function (error, data) {
        if (!error) console.log(data);

    });
});
